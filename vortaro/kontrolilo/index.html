<!doctype html>
<html lang="eo">

<head>
  <meta charset="utf-8">
  <title>
  Vortejo/Vortaro/Kontrolilo
</title>

  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="/vortejo/main.min.9a24e4e1e095cb6466fb36afb8b2cc88bbc81cfd6365454759fb0c24ea184a0b.css" integrity="sha256-miTk4eCVy2Rm&#43;zavuLLMiLvIHP1jZUVHWfsMJOoYSgs=">

  <link rel="icon" href="icon.png">
  <script src="/vortejo/eo.fe0024a94b6c3650bffb0bc50622a44991a56218058e7658c295a1442370ea5d.js" integrity="sha256-/gAkqUtsNlC/&#43;wvFBiKkSZGlYhgFjnZYwpWhRCNw6l0="></script>
  <script src="/vortejo/main.881fce7da7e4cb543f146eaaf92f58cd714fc6b49ba3aace059de48ec879a7eb.js" integrity="sha256-iB/Ofafky1Q/FG6q&#43;S9YzXFPxrSbo6rOBZ3kjsh5p&#43;s="></script>

</head>

<body class="">

  <div id="ŝirmilo" hidden>
    <div class="montrilo">
      testset
    </div>
  </div>

  <div id="unuvorto" hidden>
    <p>Radiko: <span f="ra"></span></p>
    <p>Speco: <span f="sp"></span></p>
    <p>Fonto: <span f="fo"></span></p>
    <p>Fakoj: <span f="fa"></span></p>
    <p>Vidu: <span f="vi"></span></p>
    <p>Angle: <span f="an"></span></p>
  </div>

  
    <header>
      <h1>
        <a href="/vortejo">
          <span>Vortejo</span>
        </a>
      </h1>
    </header>
  

  
<main aria-role="main">
  <h1 id="kontrolilo">Kontrolilo</h1>
<p>Eta kaj iom stulta ilo por kontroli ĉu teksto enhavas neoficialajn vortojn. Enmetu la tekston sube, premu la &ldquo;ek&rdquo; butonon. La rezulto estas la teksto, kun la vortoj partigitaj en subvortojn, laŭ la radikoj de la vortaro.</p>
<p>Estas ofte multaj kieloj laŭ kiu oni povas partigi vorton, inkluzive de tiuj kiuj ne estas tute laŭregulaj, do la sistemo trovas ĉiujn kaj tiam elektas la plej verŝajne. La nombro post ĉiu vorto estas la kiomo de eblaj partigoj - alklaku vorton por vidi tiujn. Eblas ke la elektita ne estas la intenca.</p>
<p>Vorto kun oranĝkolora bordo estas nekomprenebla uzanta la vortaron.</p>

<div class="kontrolilo">

  <div class="stato">
    pretiĝanta
  </div>

  <form class="formo" hidden>
    <textarea name="teksto" placeholder="enigi tekston ĉie tie"></textarea>
    <button type="submit">ek</button>
    <button type="button" name="mp">malplenigi</button>
  </form>

  <div class="rezulto" hidden>
  </div>

  <div class="lavorto" hidden>
  </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  let ilo = null

  let e0 = document.querySelector('.kontrolilo')
  let eS = e0.querySelector('.stato')
  let eF = e0.querySelector('form')
  let eT = eF.querySelector('[name=teksto]')
  let eR = e0.querySelector('.rezulto')
  let eM = e0.querySelector('.lavorto')

  function pretigu(o) {
    ilo = o
    montruTeksto(eS)

    eF.addEventListener('submit', e  => {
      e.preventDefault()
      komprenu(eT.value)
    })
    eF.querySelector("[name=mp]").addEventListener('click', e  => {
      eT.value = ''
    })

    komprenu(eT.value)
    eF.hidden = false
  }

  const dividŜablono = /[^-A-Za-zĉĝĥĵŝŭĈĜĤĴŜŬ]/

  function komprenu(teksto) {
    malplenigu(eR)

    if (!teksto) {
      eR.hidden = true
      eM.hidden = true
      return
    }

    let uzatajRadikoj = new Map()

    let lasteMarkita = null
    function markuUzoj(radiko) {
      if (lasteMarkita) {
        for (let v of lasteMarkita.vortoj) {
          v.classList.remove('markita')
        }
      }
      for (let v of radiko.vortoj) {
        v.classList.add('markita')
      }
      lasteMarkita = radiko
    }

    let e = document.createElement('div')
    for (v of teksto.split(dividŜablono)) {
      if (v.length == 0) {
        continue
      }
      let vs = mkel('span')

      let divRez = ilo.komprenuVorton(v.toLowerCase())
      let bonaj = divRez.bonaj
      let malbonaj = divRez.malbonaj

      let unua = bonaj[0]
      if (!unua) {
        unua = malbonaj[0]
      }

      
      vs.textContent = unua.vorto
      if (bonaj.length > 1) {
        vs.textContent += ` (${bonaj.length})`
      }
      if (unua.eraro) {
        vs.title = unua.eraro.join(', ')
        vs.classList.add('warn')
      } else {
        vs.classList.add('nivelo-' + unua.nivelo)
      }
      vs.addEventListener('click', () => montruVorto(bonaj, divRez.malbonaj))
      e.append(vs, ' ')

      if (unua.eroj) {
        for (let x of unua.eroj) {
          let r = uzatajRadikoj.get(x.r)
          if (!r) {
            r = {
              radiko: x.o,
              vortoj: []
            }
            uzatajRadikoj.set(x.r, r)
          }
          r.vortoj.push(vs)
        }
      }
    }
    eR.append(e)

    let e2 = document.createElement('div')
    for (let x of [...uzatajRadikoj.values()].sort((a, b) => eoCompare(a.radiko.radiko, b.radiko.radiko))) {
      let vs = mkel('span', { classes: [ 'nivelo-' + x.radiko.nivelo ] })
      vs.append(x.radiko.radiko)
      vs.addEventListener('mouseover', e => {
        markuUzoj(x)
      })
      vs.addEventListener('click', e => {
        montruRadiko(x.radiko)
      })
      e2.append(vs, ' ')
    }
    eR.append(e2)

    eR.hidden = false
  }

  function montruVorto(bonaj, malbonaj) {
    malplenigu(eM)

    if (bonaj.length > 0) {
      let l = document.createElement('ol')
      for (let a of bonaj) {
        let ero = document.createElement('li')
        ero.textContent = a.vorto
        if (a.eraro) {
          ero.title = a.eraro.join(', ')
        }
        l.append(ero)
      }
      eM.append(l)
    }

    if (malbonaj.length > 0) {
      let l = document.createElement('ol')
      l.classList.add('warn')
      for (let a of malbonaj) {
        let ero = document.createElement('li')
        ero.textContent = a.vorto
        if (a.eraro) {
          ero.title = a.eraro.join(', ')
        }
        l.append(ero)
      }
      eM.append(l)
    }

    eM.hidden = false
    montru(eM)
  }

  eo('\/vortaro').
  then(
    o => pretigu(o),
    e => montruEraro(eS, e))
})
</script>



  <div class="links">
    
      <a href="/vortejo/vortaro/listo/">&lt; Reen</a>
    
    <a href="https://undeconstructed.github.io/vortejo/">Hejmen</a>
    
      <a href="/vortejo/vortaro/problemoj/">Antaŭen &gt;</a>
    
  </div>
</main>


  <footer>
    <span>Copyright 2020 | <a href="https://github.com/undeconstructed/">Kontakti min</a> | Vidi la <a href="/vortaro">Vortara datenaro</a> (kaj <a href="https://github.com/undeconstructed/vortaro">ĝia fonto</a>).</span>
  </footer>

</body>

</html>
