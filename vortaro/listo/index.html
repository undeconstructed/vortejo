<!doctype html>
<html lang="eo">

<head>
  <meta charset="utf-8">
  <title>
  Vortejo/Vortaro/Listo
</title>

  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="/vortejo/main.min.9a24e4e1e095cb6466fb36afb8b2cc88bbc81cfd6365454759fb0c24ea184a0b.css" integrity="sha256-miTk4eCVy2Rm&#43;zavuLLMiLvIHP1jZUVHWfsMJOoYSgs=">

  <link rel="icon" href="icon.png">
  <script src="/vortejo/eo.fe0024a94b6c3650bffb0bc50622a44991a56218058e7658c295a1442370ea5d.js" integrity="sha256-/gAkqUtsNlC/&#43;wvFBiKkSZGlYhgFjnZYwpWhRCNw6l0="></script>
  <script src="/vortejo/main.881fce7da7e4cb543f146eaaf92f58cd714fc6b49ba3aace059de48ec879a7eb.js" integrity="sha256-iB/Ofafky1Q/FG6q&#43;S9YzXFPxrSbo6rOBZ3kjsh5p&#43;s="></script>

</head>

<body class="">

  <div id="ŝirmilo" hidden>
    <div class="montrilo">
      testset
    </div>
  </div>

  <div id="unuvorto" hidden>
    <p>Radiko: <span f="ra"></span></p>
    <p>Speco: <span f="sp"></span></p>
    <p>Fonto: <span f="fo"></span></p>
    <p>Fakoj: <span f="fa"></span></p>
    <p>Vidu: <span f="vi"></span></p>
    <p>Angle: <span f="an"></span></p>
  </div>

  
    <header>
      <h1>
        <a href="/vortejo">
          <span>Vortejo</span>
        </a>
      </h1>
    </header>
  

  
<main aria-role="main">
  <h1 id="vortoj-radikoj">Vortoj (radikoj)</h1>

<div class="vortaro">

  <div class="stato">
    pretiĝanta
  </div>

  <div class="tuto" hidden id="#tuto">

    <div class="filtro">
      <div>
        Fako: <select class="fako" name="">
          <option value=""></option>
        </select>
      </div>
      <div>
        Fonto: <select class="fonto" name="">
          <option value=""></option>
          <option value="f">fundamenta</option>
          <option value="a">aldona</option>
          <option value="n">neoficiala</option>
        </select>
      </div>
      <div>
        Speco: <select class="speco" name="">
          <option value=""></option>
          <option value="a">abstrakta</option>
          <option value="k">konkreta</option>
          <option value="e">esperanta</option>
          <option value="n">nomo</option>
        </select>
      </div>
      <div>
        Nivelo: <select class="nivelo" name="">
          <option value=""></option>
          <option value="0" class="nivelo-0">0</option>
          <option value="1" class="nivelo-0">1</option>
          <option value="2" class="nivelo-0">2</option>
          <option value="3" class="nivelo-0">3</option>
        </select>
      </div>
      <div>
        Nombro: <span class="nombro"></span>
      </div>
    </div>

    <div class="rezulto">
      <table>
        <thead>
          <td>&nbsp;&nbsp;</td>
          <td>radiko</td>
          <td>speco</td>
          <td>fonto</td>
          <td>fakoj</td>
          <td>vidu</td>
          <td>en</td>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>

  </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  let ilo = null
  let elektitaFako = null

  let e0 = document.querySelector('.vortaro')
  let eS = e0.querySelector('.stato')
  let eT = e0.querySelector('.tuto')
  let linioj = []

  function pretigu(o) {
    ilo = o
    montruTeksto(eS)
    montruFiltrilo()
    montruĈion()
    prepariFiltro()
    eT.hidden = false
  }

  let fakListo = eT.querySelector('.filtro select.fako')
  let fontListo = eT.querySelector('.filtro select.fonto')
  let specListo = eT.querySelector('.filtro select.speco')
  let nivelListo = eT.querySelector('.filtro select.nivelo')
  let nombro = eT.querySelector('.filtro .nombro')

  function montruFiltrilo() {
    for (let f of ilo.fakoj) {
      let eblo = mkel('option', { text: f.nomo })
      fakListo.append(eblo)
    }
    fakListo.addEventListener('change', prepariFiltro)
    fontListo.addEventListener('change', prepariFiltro)
    specListo.addEventListener('change', prepariFiltro)
    nivelListo.addEventListener('change', prepariFiltro)
  }

  function prepariFiltro() {
    let filtroj = []
    if (fakListo.value) {
      filtroj.push(r => r.fakoj.includes(fakListo.value))
    }
    if (fontListo.value) {
      filtroj.push(r => r.fonto == fontListo.value)
    }
    if (specListo.value) {
      filtroj.push(r => r.speco == specListo.value)
    }
    if (nivelListo.value) {
      let n = parseInt(nivelListo.value)
      filtroj.push(r => r.nivelo == n)
    }
    let n = filtri(r => {
      for (let f of filtroj) {
        if (!f(r)) {
          return false
        }
      }
      return true
    })
    nombro.textContent = n
    eT.scrollIntoView(true)
  }

  function montruĈion() {
    let tgt = eT.querySelector('.rezulto table tbody')

    for (let radiko of ilo.radikoj) {
      let linio = mkel('tr')
      linio.append(mkel('td', { classes: [ 'nivelo-' + radiko.nivelo ] }))
      linio.append(mkel('td', { text: radiko.radiko }))
      linio.append(mkel('td', { text: radiko.speco }))
      linio.append(mkel('td', { text: radiko.fonto }))
      linio.append(mkel('td', { text: radiko.fakoj.join(' ') }))
      linio.append(mkel('td', { text: radiko.vidu}))
      linio.append(mkel('td', { text: radiko.tradukoj['en'] }))
      if (!radiko.bona) {
        linio.classList.add('malbona')
      }

      tgt.append(linio)

      linioj.push({
        linio: linio,
        radiko: radiko
      })
    }
  }

  function filtri(f) {
    let taŭgaj = []
    for (let linio of linioj) {
      if (f(linio.radiko)) {
        taŭgaj.push(linio.linio)
      }
    }

    let tgt = eT.querySelector('.rezulto table tbody')
    tgt.replaceChildren(...taŭgaj)
    return taŭgaj.length
  }

  eo('\/vortaro').
  then(
    o => pretigu(o),
    e => montruEraro(eS, e))
})
</script>



  <div class="links">
    
      <a href="/vortejo/vortaro/ser%C4%89ilo/">&lt; Reen</a>
    
    <a href="https://undeconstructed.github.io/vortejo/">Hejmen</a>
    
      <a href="/vortejo/vortaro/kontrolilo/">Antaŭen &gt;</a>
    
  </div>
</main>


  <footer>
    <span>Copyright 2020 | <a href="https://github.com/undeconstructed/">Kontakti min</a> | Vidi la <a href="/vortaro">Vortara datenaro</a> (kaj <a href="https://github.com/undeconstructed/vortaro">ĝia fonto</a>).</span>
  </footer>

</body>

</html>
